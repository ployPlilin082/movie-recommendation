<header class="navbar">
  <div class="navbar-container">
    <!-- LEFT -->
    <div class="nav-left">
      <a routerLink="/home" class="logo-wrap">
        <img src="img/logo.png" alt="MovieCollective" class="logo-img" />
        <span class="logo-text">MovieCollective</span>
      </a>

      <!-- Desktop search (optional / minimal) -->
      <div class="search-bar">
        <input [(ngModel)]="searchText" (input)="onSearchInput()" placeholder="Search movies..." />

        <!-- DROPDOWN -->
        <div class="search-dropdown" *ngIf="results.length">
          <div class="search-item" *ngFor="let m of results" (click)="openMovie(m.id,m.media_type)">
            <img [src]="getImage(m.poster_path)" />
            <div class="meta">
              <div class="title">{{ m.title }}</div>
              <div class="rating">‚≠ê {{ m.vote_average }}</div>
            </div>
          </div>
        </div>
      </div>
    </div>


    <!-- RIGHT ‚Äì Desktop Links -->
    <nav class="nav-right">
      <a routerLink="/home" routerLinkActive="active" class="link">Home</a>
      <a routerLink="/playlist" routerLinkActive="active" class="link">Playlist</a>
      <a routerLink="/chat" routerLinkActive="active" class="link">Chat</a>
      <a routerLink="/schedule" routerLinkActive="active" class="link">Schedule</a>
      <a routerLink="/cost-calculator" routerLinkActive="active" class="link">Cost</a>
      <a routerLink="/community" routerLinkActive="active" class="link">Community</a>

      <!-- ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà login -->
      <ng-container *ngIf="!user; else loggedIn">
        <a routerLink="/sign-in" class="btn-gradient login-btn">Login</a>
        <a routerLink="/create-account" class="btn-gradient signup-btn">Sign Up</a>
      </ng-container>

      <!-- ‡∏ñ‡πâ‡∏≤ login ‡πÅ‡∏•‡πâ‡∏ß -->
      <ng-template #loggedIn>
        <div class="user-box">
          <a routerLink="/profile" class="profile-link">
            <div class="avatar-wrap">
              <img *ngIf="avatarBlobUrl; else defaultAvatar" [src]="avatarBlobUrl" alt="profile" />

              <ng-template #defaultAvatar>
                <span class="avatar-fallback">
                  {{ (user?.displayName || user?.email)?.charAt(0) | uppercase }}
                </span>
              </ng-template>
            </div>

            <div class="user-meta">
              <span class="user-name">
                {{ user?.displayName || user?.email }}
              </span>
              <span class="user-role">Member</span>
            </div>
          </a>

          <button class="logout-btn" (click)="logout()">Logout</button>
        </div>
      </ng-template>


    </nav>

 <div class="nav-actions">
  <button class="search-btn-mobile" (click)="toggleSearch()">
    {{ isSearchOpen ? '‚úï' : 'üîç' }}
  </button>

  <button class="hamburger" [class.hide]="isMenuOpen" (click)="toggleMenu()">
    <span></span>
    <span></span>
    <span></span>
  </button>
</div>
  </div>

  <!-- Side Menu Overlay -->
  <div class="side-overlay" [class.open]="isMenuOpen" (click)="closeMenu()">

    <nav class="side-menu" [class.open]="isMenuOpen" (click)="$event.stopPropagation()">

      <div class="side-header">
        <span>Menu</span>
        <button class="close-btn" (click)="closeMenu()">‚úï</button>
      </div>


      <a routerLink="/home" class="side-link" (click)="closeMenu()">Home</a>
      <a routerLink="/playlist" class="side-link" (click)="closeMenu()">Playlist</a>
      <a routerLink="/chat" class="side-link" (click)="closeMenu()">Chat</a>
      <a routerLink="/schedule" class="side-link" (click)="closeMenu()">Schedule</a>
      <a routerLink="/cost-calculator" class="side-link" (click)="closeMenu()">Cost Calculator</a>
      <a routerLink="/community" class="side-link" (click)="closeMenu()">Community</a>
      <a routerLink="/profile" class="side-link" (click)="closeMenu()">Profile</a>
      <a routerLink="/sign-in" class="side-link"(click)="closeMenu()">Login</a>
      <a routerLink="/create-account" class="side-link"(click)="closeMenu()">Sign Up</a>
      

      <button class="side-logout" (click)="logout(); closeMenu()">
        Logout
      </button>

    </nav>
  </div>
  <div class="search-overlay" *ngIf="isSearchOpen" (click)="closeSearch()">
  <div class="search-panel" (click)="$event.stopPropagation()">

    <input
      [(ngModel)]="searchText"
      (input)="onSearchInput()"
      placeholder="Search movies..."
      style="
        width: 100%;
        padding: 12px;
        border-radius: 999px;
        border: none;
        outline: none;
        background: rgba(255,255,255,0.08);
        color: #fff;
        font-size: 14px;
      "
    />

 <div class="search-overlay-bg"
     *ngIf="results.length"
     (click)="closeSearchDropdown()">

  <div class="search-dropdown" (click)="$event.stopPropagation()">
    <div class="search-item"
         *ngFor="let m of results"
         (click)="openMovie(m.id, m.media_type); closeSearchDropdown()">
      <img [src]="getImage(m.poster_path)" />
      <div class="meta">
        <div class="title">{{ m.title }}</div>
        <div class="rating">‚≠ê {{ m.vote_average }}</div>
      </div>
    </div>
  </div>

</div>


  </div>
</div>



</header>